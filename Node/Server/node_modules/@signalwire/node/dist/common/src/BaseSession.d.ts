import * as log from 'loglevel';
import Connection from './services/Connection';
import BaseMessage from '../../common/src/messages/BaseMessage';
import { BroadcastParams, ISignalWireOptions, SubscribeParams } from './util/interfaces';
export default abstract class BaseSession {
    options: ISignalWireOptions;
    uuid: string;
    sessionid: string;
    subscriptions: {
        [channel: string]: any;
    };
    nodeid: string;
    master_nodeid: string;
    expiresAt: number;
    signature: string;
    relayProtocol: string;
    contexts: string[];
    protected connection: Connection;
    protected _jwtAuth: boolean;
    protected _reconnectDelay: number;
    protected _autoReconnect: boolean;
    private _idle;
    private _executeQueue;
    constructor(options: ISignalWireOptions);
    readonly __logger: log.Logger;
    readonly connected: boolean;
    readonly expired: boolean;
    execute(msg: BaseMessage): any;
    executeRaw(text: string): void;
    validateOptions(): boolean;
    broadcast(params: BroadcastParams): void;
    subscribe({ protocol, channels, handler }: SubscribeParams): Promise<any>;
    unsubscribe({ protocol, channels, handler }: SubscribeParams): Promise<any>;
    disconnect(): Promise<void>;
    on(eventName: string, callback: Function): this;
    off(eventName: string, callback?: Function): this;
    refreshToken(token: string): Promise<void>;
    connect(): Promise<void>;
    protected _handleLoginError(error: any): void;
    protected _onSocketOpen(): Promise<void>;
    protected _onSocketClose(): void;
    protected _onSocketError(error: Error): void;
    protected _onSocketMessage(response: any): void;
    protected _removeSubscription(protocol: string, channel?: string): void;
    protected _addSubscription(protocol: string, handler: Function, channel: string): void;
    _existsSubscription(protocol: string, channel?: string): boolean;
    private _attachListeners;
    private _detachListeners;
    private _emptyExecuteQueues;
    private _removeConnection;
    private _checkTokenExpiration;
    static on(eventName: string, callback: any): void;
    static off(eventName: string): void;
    static uuid(): string;
}
